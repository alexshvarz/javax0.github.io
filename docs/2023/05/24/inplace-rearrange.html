<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Rearrange and array in place | Java Deep, mostly Java</title>
<meta name="generator" content="Jekyll v4.3.3" />
<meta property="og:title" content="Rearrange and array in place" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="This article is about an algorithmic problem. I did not find a solution to this problem either thinking about it, searching the net or talking to friends. The problem itself is simple. At the first reading, it may lure the reader into a false sense of simplicity. You may feel that this should not be an issue. But it is. At least for me." />
<meta property="og:description" content="This article is about an algorithmic problem. I did not find a solution to this problem either thinking about it, searching the net or talking to friends. The problem itself is simple. At the first reading, it may lure the reader into a false sense of simplicity. You may feel that this should not be an issue. But it is. At least for me." />
<link rel="canonical" href="http://localhost:4000/2023/05/24/inplace-rearrange.html" />
<meta property="og:url" content="http://localhost:4000/2023/05/24/inplace-rearrange.html" />
<meta property="og:site_name" content="Java Deep, mostly Java" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-05-24T00:00:00+02:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Rearrange and array in place" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-05-24T00:00:00+02:00","datePublished":"2023-05-24T00:00:00+02:00","description":"This article is about an algorithmic problem. I did not find a solution to this problem either thinking about it, searching the net or talking to friends. The problem itself is simple. At the first reading, it may lure the reader into a false sense of simplicity. You may feel that this should not be an issue. But it is. At least for me.","headline":"Rearrange and array in place","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2023/05/24/inplace-rearrange.html"},"url":"http://localhost:4000/2023/05/24/inplace-rearrange.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Java Deep, mostly Java" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Java Deep, mostly Java</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a><a class="page-link" href="/about/">About</a><a class="page-link" href="/">Java Deep</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Rearrange and array in place</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2023-05-24T00:00:00+02:00" itemprop="datePublished">May 24, 2023
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This article is about an algorithmic problem.
I did not find a solution to this problem either thinking about it, searching the net or talking to friends.
The problem itself is simple.
At the first reading, it may lure the reader into a false sense of simplicity.
You may feel that this should not be an issue.
But it is.
At least for me.</p>
</div>
<div class="paragraph">
<p>Nothing Java.
Nothing programming other than it is about an algorithmic problem.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="1-problem-statement">1. Problem Statement</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There is an array of \(2n\) elements.
The array is \(A=\{a_1,a_2, ... , a_n, b_1, b_2, ... , b_b\}\).
What steps should be taken to rearrange the array so that \(A=\{a_1,b_1,a_2,b_2, ... , a_n,b_n\}\) with limited, maximum \(O(1)\) memory, and \(O(n)\) time.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-chatgpt-solution">2. ChatGPT solution</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Sine generative AI is sweeping the media and the internet; I thought that I should try to use it to solve the problem.
After all, if it takes my job just in a few years, at least we can let it do some work for us till then.</p>
</div>
<div class="paragraph">
<p>Here is the answer, no surprise: totally wrong:</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="title">Wrong answer from ChapGPT</div>
<div class="paragraph">
<p>To rearrange the array \(A=\{a_1,a_2, ... , a_n, b_1, b_2, ... , b_n\}\) into \(A=\{a_1,b_1,a_2,b_2, ... , a_n,b_n\}\) with limited, maximum O(1) memory, and \(O(n)\) time you can follow the steps below:</p>
</div>
<div class="paragraph">
<p>Traverse the array and for each element at index \(i\), swap it with the element at index \(i+n\).</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>For i=1 to n:
  Swap A[i] with A[i+n]</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>After the traversal is complete, the array will be rearranged as \(A=\{a_1,b_1,a_2,b_2, ... , a_n,b_n\}\).
The above algorithm has a time complexity of O(n) and uses only O(1) memory as only a constant number of variables are used for swapping elements in the array.</p>
</div>
<div class="paragraph">
<p>After following these steps, the original array \(A=\{a_1,a_2, ... , a_n, b_1, b_2, ... , b_n\}\) would be rearranged as \(A=\{a_1,b_1,a_2,b_2, ... , a_n,b_n\}\).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The described algorithm is \(O(n)\) time and \(O(1)\) memory, but the resulting array will be \(A=\{b_1,b_2, ... , b_n,a_1,a_2, ... , a_n\}\).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
I am not worried about being replaced by an AI as a software engineer. Yet.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="3-without-the-o1memory-constraint">3. Without the \( O(1)\)memory constraint</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The problem is not that hard if you do not have the \(O(1)\) memory constraint.
As a matter of fact it is so easy that it can be solved even by ChapGPT.
Or can it?</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="title">Simpler problem, still not good answer from ChapGPT</div>
<div class="paragraph">
<p>To rearrange the array \(A={a_1,a_2, ... , a_n, b_1, b_2, ... , b_n}\) into \(A={a_1,b_1,a_2,b_2, ... , a_n,b_n}\), you can follow the steps below:</p>
</div>
<div class="paragraph">
<p>Create two new arrays, one for the \(a\) values and another for the \(b\) values.
Initialize an empty array for the \(a\) values, say \(a_{new}\).
Initialize an empty array for the \(b\) values, say \(b_{new}\).
Traverse the original array and separate the \(a\) and \(b\) values into two separate arrays.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><code>For i=1 to n:</code><br>
<code> </code> <code> </code> <code> </code> <code> </code> <code>Add</code> \(a_i\) <code>to</code> \(a_{new}\)<br>
<code> </code> <code> </code> <code> </code> <code> </code> <code>Add</code> \(b_i\) <code>to</code> \(b_{new}\)</p>
</div>
<div class="paragraph">
<p><code>For i=n+1 to 2n:</code><br>
<code> </code> <code> </code> <code> </code> <code> </code> <code>Add</code> \(b_i\) <code>to</code> \(a_{new}\)<br>
<code> </code> <code> </code> <code> </code> <code> </code> <code>Add</code> \(a_i\) <code>to</code> \(b_{new}\)</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Concatenate the two new arrays in the desired order to get the final result.
Concatenate \(a_{new}\) and \(b_{new}\) in the order \(a_{new}, b_{new}\) to get the desired result.
After following these steps, the original array \(A={a_1,a_2, ... , a_n, b_1, b_2, ... , b_n}\) would be rearranged as \(A={a_1,b_1,a_2,b_2, ... , a_n,b_n}\).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>I believe there is no need to explain why the solution is wrong, and overly complicated.
The allocation of the two arrays is unnecessary.
We need only one extra array of length \(2n\), say \(T\).
Then the code will look:</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><code>For i=1 to n:</code><br>
<code> </code> <code> </code> <code> </code> <code> </code> <code>Add</code> \(a_i\) <code>to</code> \(T\)<br>
<code> </code> <code> </code> <code> </code> <code> </code> <code>Add</code> \(b_i\) <code>to</code> \(T\)</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Voilà, you have the result in \(T\).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Still not worried.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="4-without-the-on-time-constraint-on2">4. Without the \( O(n)\) time constraint: \(O(n^2)\)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>How about giving some extra time instead of extra memory?
Let&#8217;s keep the \(O(1)\) memory constraint, but allow \(O(n^2)\) time.</p>
</div>
<div class="paragraph">
<p>This problem is also simple to solve, but for some reason, ChatGPT gave such a foolish answer that I decided not to copy here.
I know, you are curious, but it has no value, totally gibberish.
The solution is</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>to take \(b_i\)out from the array for every \(i=1,n\)one by one,</p>
</li>
<li>
<p>push every element one position higher below \(b_i\) until we get to the place where \(b_i\) will get</p>
</li>
<li>
<p>put \(b_i\) to its place.</p>
</li>
</ol>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="https://raw.githubusercontent.com/javax0/javax0.github.io/master/assets/images/insert-rearrange.png" alt="insert rearrange" width="50%">
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><code>For i=1 to n:</code><br>
<code> </code> <code> </code> <code> </code> <code> </code> <code>Store</code> \(b_i\) <code>being at the position</code> \( n+i\)<code>to a variable named</code> \(x\)<br>
<code> </code> <code> </code> <code> </code> <code> </code> <code>Move all objects from</code> \( 2i\) <code>till</code> \(n+i\) <code>to the next position</code><br>
<code> </code> <code> </code> <code> </code> <code> </code> <code>Put </code> \(b_i\)<code>from the variable</code> \(x\)<code>to the position 2i</code></p>
</div>
</div>
</div>
<div class="paragraph">
<p>During the first step, we have to move \(n-1\) objects.
During the second step, we have to move \(n-2\) objects, and so on.
Moving all the \(b_i; i=1,n\)elements will need \( \sum_{i=1}^{n-1} (n-i) = \frac{n(n-1)}{2}\) moves.
It means that this algorithm is \(O(n^2)\) time.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="5-without-the-on-time-constraint-on-log-n">5. Without the \( O(n)\) time constraint: \(O(n \log n)\)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We know that there is a faster, more complex solution that is \(O(n \log n)\) time.
Let&#8217;s have a look at that:</p>
</div>
<div class="paragraph">
<p>If the array length is 2, in other words, the array is \(A=\{a_1,b_1\}\), then the solution is trivial.
In that case do not need to do anything, just return the array as it is.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Funny (wrong) suggestion from CoPilot</div>
<div class="paragraph">
<p><em>If the array is longer, then we can split it into two parts, rearrange them separately, and then merge the results.</em></p>
</div>
<div class="paragraph">
<p>The above sentence is not part of the normal flow of this article.
I write this article with CoPilot switched on.
The above sentence was suggested by CoPilot for this location.</p>
</div>
<div class="paragraph">
<p>It is fun to write articles with CoPilot switched on (pronounce it as Copy-a-Lot).
I do not say it is easier, or less work.
Sometimes it feels like a little kid running around and making a mess while you try to clean your flat.
Rather the contrary, but undeniably <em>more fun.</em>
Cursive words in the above paragraphs all were suggested by CoPilot.</p>
</div>
<div class="paragraph">
<p>And now, just let&#8217;s go on with the normal text of the article.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Assume that the array length is \(n=2^m\).
Divide the array into four parts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>\(Q_1=[a_1-a_\frac n2\)],</p>
</li>
<li>
<p>\(Q_2=[a_{\frac n2+1},a_n\)],</p>
</li>
<li>
<p>\(Q_3=[b_1-b_\frac n2\)],</p>
</li>
<li>
<p>\(Q_4=[b_{\frac n2+1},b_n\)],</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Swap the elements of \(Q_2\) and \(Q_3\)in a single loop:</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><code>For i=1 to </code> \( \frac n2\)<code>:</code><br>
<code> </code> <code> </code> <code> </code> <code> </code> <code>Swap</code> \(a_{\frac n2+i}\) <code>and</code> \(b_i\)</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Essentially, we transform the array \(Q_1|Q_2|Q_3|Q_4\) into \(Q_1|Q_3|Q_2|Q_4\).
After this, the algorithm can be applied for the sub arrays \(Q_1|Q_3\) and \(Q_1|Q_4\).</p>
</div>
<div class="paragraph">
<p>The assumption that \(n=2^m\) helps to halve the array down to length 2.
When the length of the array is not some power of two, the halving is not trivial.</p>
</div>
<div class="paragraph">
<p>The algorithm running time \(T(n) = 2T(\frac n2) + O(n)\).
The \(O(n)\)term is the time needed to swap the elements of \(Q_2\)and \(Q_3\).
The resulting time complexity is \(O(n \log n)\).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="6-conclusion-and-takeaway">6. Conclusion, and Takeaway</h2>
<div class="sectionbody">
<div class="paragraph">
<p>I shared this "simple" algorithmic problem with you.
It is haunting me for a few years.
The beauty of this problem is that it is simple, but not trivial.
If you happen to know the answer, tell me!
I am old enough accepting my limits, and it will more amaze me to see the solution than angry about wy I have not seen it before.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">CoPilot&#8217;s suggestion</div>
<div class="paragraph">
<p><em>The takeaway is that you should not be afraid of simple problems.</em></p>
</div>
</div>
</div>
<div class="paragraph">
<p>How about AI?
What is the merit of all this?
Should we be afraid of AI?</p>
</div>
<div class="paragraph">
<p>The answer is no.
There is no point of being afraid, generally.
We can be prepared, aware, but not afraid.
AI in its current form can help us solve problems, but it is immature.
I expect the change and maturing of AI will be extremely rapid to a point.</p>
</div>
<div class="paragraph">
<p>It will transform how we work, but will not work instead of us or replace us.
Some people will lose jobs, but new jobs will be created.</p>
</div>
<div class="paragraph">
<p>In the 1950s, people were afraid of computers.
As a matter of fact, the women doing the numerical calculations were called computers.
Their job does not exist today, but it did not disappear from day one to the next.
It took years to disappear.
We still do some calculations by hand.
We still use calculators on the job site.
There is even an anachronistic calculator app on the iPhone.</p>
</div>
<div class="paragraph">
<p>Something similar will happen with AI.
The change will be gradual.
We will have time to adapt.
AI development is fast, and we feel that the development of new technologies speeds up.
However, this speed is limited by the adoption rate of humans.
Humans do not change that fast.</p>
</div>
</div>
</div>


<!-- Disqus comments section goes here (if comments are enabled) -->

<hr/>
<h1>Comments</h1>
<p>Please leave your comments using Disqus, or just press one of the happy faces.
If for any reason you do not want to leave a comment here, <a href="https://github.com/javax0/javax0.github.io/issues">you can still create a Github ticket</a>.</p>
<div class="comments">
    <div id="disqus_thread"></div>

    <script type="text/javascript">

        /* * * STOP! * * */
        /* You shouldn't need to edit ANYTHING below to get this working! */
        /* Instead, edit the key `disqus.shortname` in _config.yml */

        var disqus_config = function (){
            this.page.url = 'http://localhost:4000/2023/05/24/inplace-rearrange.html';
            this.page.identifier = '/2023/05/24/inplace-rearrange.html';
        };

        (function() {
            var d = document, s = d.createElement('script');
            s.type = 'text/javascript'; s.async = true;
            s.src = 'https://javax0.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();

    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>




  </div><a class="u-url" href="/2023/05/24/inplace-rearrange.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Java Deep, mostly Java</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Java Deep, mostly Java</li><li><a class="u-email" href="mailto:peter@verhas.com">peter@verhas.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/verhas"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">verhas</span></a></li><li><a href="https://www.twitter.com/verhas"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">verhas</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>javax0 is a technical Java oriented blog. Whenever I find something interesting, in the mood and feel the power to publish it, you will get it here. Publications are usually released on Wednesday 15:00am GMT. Earlier posts of the blog were published on Javax0 Wordpress Site at https://javax0.wordpress.com</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
