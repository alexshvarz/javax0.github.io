<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Use Java annotation deprecated the right way | Java Deep, mostly Java</title>
<meta name="generator" content="Jekyll v4.3.1" />
<meta property="og:title" content="Use Java annotation deprecated the right way" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="There is hardly anything more infuriating that seeing a method @Deprecated without a proper documentation. I feel lost. Should I still use the method? Probably that is not the intention of the developer, that is why he/she added the deprecation annotation. Should I use something else? So&#8230;&#8203;." />
<meta property="og:description" content="There is hardly anything more infuriating that seeing a method @Deprecated without a proper documentation. I feel lost. Should I still use the method? Probably that is not the intention of the developer, that is why he/she added the deprecation annotation. Should I use something else? So&#8230;&#8203;." />
<link rel="canonical" href="https://javax0.github.io/2014/02/05/use-java-annotation-deprecated-the-right-way.html" />
<meta property="og:url" content="https://javax0.github.io/2014/02/05/use-java-annotation-deprecated-the-right-way.html" />
<meta property="og:site_name" content="Java Deep, mostly Java" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2014-02-05T00:00:00+01:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Use Java annotation deprecated the right way" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2014-02-05T00:00:00+01:00","datePublished":"2014-02-05T00:00:00+01:00","description":"There is hardly anything more infuriating that seeing a method @Deprecated without a proper documentation. I feel lost. Should I still use the method? Probably that is not the intention of the developer, that is why he/she added the deprecation annotation. Should I use something else? So&#8230;&#8203;.","headline":"Use Java annotation deprecated the right way","mainEntityOfPage":{"@type":"WebPage","@id":"https://javax0.github.io/2014/02/05/use-java-annotation-deprecated-the-right-way.html"},"url":"https://javax0.github.io/2014/02/05/use-java-annotation-deprecated-the-right-way.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://javax0.github.io/feed.xml" title="Java Deep, mostly Java" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Java Deep, mostly Java</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a><a class="page-link" href="/">Java Deep</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Use Java annotation deprecated the right way</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2014-02-05T00:00:00+01:00" itemprop="datePublished">Feb 5, 2014
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <div class="paragraph">
<p>There is hardly anything more infuriating that seeing a method <code>@Deprecated</code> without a proper documentation. I feel lost. Should I still use the method? Probably that is not the intention of the developer, that is why he/she added the deprecation annotation. Should I use something else? So&#8230;&#8203;.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>What are the rules using <code>@Deprecated</code>?</p>
</div>
</blockquote>
</div>
<div class="sect3">
<h4 id="1-1-1-rule-1-do-javadoc-how-not-to">1.1.1. Rule #1: do Javadoc how not to</h4>
<div class="paragraph">
<p>Whenever you deprecate a method create a JavaDoc that tells the programmer how not to use this method any more. Do not only say that "this method is deprecated, don&#8217;t use it". That is exactly what the deprecation annotation and the JavaDoc <code>@deprecated</code> word says. There is no point to repeat it in English. The targeted audience is Java programmer, supposed to know what deprecation means.</p>
</div>
<div class="paragraph">
<p>Name the new methods, that replace the old one. (Use <code>@link</code>!) This may or may not be enough. The new method will have some documentation that explains how to use it. Do not repeat that (text or meaning) in the JavaDoc. Just do not repeat yourself, documentation should also be DRY. On the other hand you may want to describe how to replace the old call with the new one. You may give hint for the refactoring.</p>
</div>
</div>
<div class="sect3">
<h4 id="1-1-2-rule-2-do-not-javadoc-how-to">1.1.2. Rule #2: do not Javadoc how to</h4>
<div class="paragraph">
<p>Remove the old JavaDoc documentation. Some may argue that users who maintain the legacy code may still need that. The fact is that they use an old version of the method in an old version of a library. The documentation in the old version is still there, frozen carved into stone (or rather carved into a release in the repository). The actual version that deprecates the method should not contain the outdated documentation. That would encourage the programmers to keep on using the method. There is one single way to use a deprecated method: not using it. JavaDoc should be current describing only that, as described above in rule#1.</p>
</div>
</div>
<div class="sect3">
<h4 id="1-1-3-rule-3-no-apology-in-javadoc">1.1.3. Rule #3: no apology in JavaDoc</h4>
<div class="paragraph">
<p>Do not explain in the JavaDoc why the method was deprecated. You are a responsible developer. This is your decision. You made your choice. Others have to live with it. Write a blog about the background of the architectural decision if you wish. It may be helpful, but JavaDoc is not the place for it.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Deprecated API JavaDoc is exclusively to explain how not to use.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>The emphasis is on <em>how</em>. Not "why not to use it".</p>
</div>
</div>
<div class="sect3">
<h4 id="1-1-4-rule-4-do-deprecate">1.1.4. Rule #4: do deprecate</h4>
<div class="paragraph">
<p>If you feel like needing to deprecate a method: do it! If you are afraid of your users and you do not want to make their life miserable deprecating some method this decision will make your life miserable instead. Do all measures to have an API that will not need deprecation so long as long possible. But if ever something needs to be deprecated: throw it right away. Do not feel guilty why you did not see the future when the api was designed. None of us sees the future perfect. After all, life would be boring knowing the future.</p>
</div>
<div class="paragraph">
<p>If you are interested on opinions about this topic on <a href="http://stackoverflow.com/questions/5039723/should-i-use-javadoc-deprecation-or-the-annotation-in-java">stakcoverflow</a> visit the linked page. Or just start a flame war, if you wish, here. I am totally trollerant.</p>
</div>
</div>
<div class="sect2">
<h3 id="comments-imported-from-wordpress">Comments imported from Wordpress</h3>
<div class="paragraph">
<p><strong>Peter Verhas</strong> 2014-02-11 10:07:45</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>&gt;You asked for the flamewar</p>
</div>
<div class="paragraph">
<p>I know ;-)</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><strong>Peter Verhas</strong> 2014-02-10 15:58:14</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If there is no old version of the library, then you should not use any deprecated method when you start to use the current version. If there "was" an old version of the library but currently it does not exist any more then your release management is not professional. "Having to search elsewhere" in this case means to search exactly at the place where the documentation should be.</p>
</li>
<li>
<p>You need not analyze the code. Just read it. No documentation can be more precise than that. You want to understand what the code does in order to maintain that. How would you achieve that without understanding the code itself?</p>
</li>
<li>
<p>You want it or not this is actually what happens when you use libraries and programming languages. You can access private variables via reflection, but this is made inconvenient. You can fluent methods but only in a specific order. You can convert in Java a <code>long</code> to <code>Double</code> but only through <code>double</code>. They are all inconvenienced.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To get rid of a deprecated method is always an option. It is a matter of cost. If the library is not usable without the deprecated method, then the library is not well designed. Consider getting rid of the library.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><strong>Hubertus Bigend</strong> 2014-02-10 10:50:44</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>As to rule #2: Sounds correct, in theory, but in real life, one day a reason for updating a library comes up, and shortly thereafter a different reason comes up for looking into a different piece of code, and then there&#8217;s that call to a now-deprecated method that doesn&#8217;t even say what it&#8217;s doing anymore. Just because a method has been deprecated you shouldn&#8217;t impose unnecessary difficulties on people who still use it for whatever reason. A reason that might even be sensible ;-)</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><strong>Peter Verhas</strong> 2014-02-10 14:42:29</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>If there is difference between theory and real life, then probably there is some problem with the theory. Or, for that matter, with the real life.</p>
</div>
<div class="paragraph">
<p>First of all: the documentation is still there in the old version of the library. Have a look at that.</p>
</div>
<div class="paragraph">
<p>Second: there is a working code that should fairly explain the usage of the method. If it does not, then this is not the lack of JavaDoc of the deprecated method the difficulty but rather the non clean code.</p>
</div>
<div class="paragraph">
<p>Finally: if I, as a developer of a library encourage the users (my customers) to use a deprecated method providing the outdated information I do harm to them. Never harm the customer.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><strong>Hubertus Bigend</strong> 2014-02-10 15:37:32</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>You asked for the flamewar ;-)
1. In my example, which is a real-world example, there is no old version of the library in the project. Having to search elsewhere makes the job more time-consuming and thereby more costly.
2. Having to analyze the code that uses the method in order to determine what it does is, even in a best-case scenario, more time-consuming and thereby more costly.
3. I, being a developer and, as such, customer when it comes to libraries, do not need nor want library developers to discourage me of something by inconveniencing me, which is decidedly paternalizing, too. To mark a method as deprecated by annotation and/or JavaDoc is absolutely sufficient to make the point. And as a matter of fact, I have never been harmed by existing documentation for deprecated methods, and I&#8217;ve encountered some in my life. I have, though, been more than once inconvenienced, i.e. harmed, by absent documentation for a deprecated method in a library I had to use the latest version of, while, at the same time, refactoring the code to get rid of the deprecated method was not an option&#8230;&#8203;</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><strong>Unit test deprecated methods | Java Deep</strong> 2014-05-28 10:01:16</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>[&#8230;] methods have to be treated different. At least in my opinion. The question I did not discuss in that article is if we have to unit test [&#8230;]</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><strong>Bo</strong> 2014-07-29 14:56:42</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>although a couple of months late, nevertheless &#8230;&#8203; ;)
@1: "there is no old version in the <em>project</em>". As I understand it, and experience it in engineering projects, there is reluctance to maintain several third party libraries. Its a difference if you have 10 libraries only, or 3 versions of each library. This does not mean that "the truth is not out there ;) ",  just its not policy to keep it <em>alongside</em> the project for good reasons. So, if an old method is still there, it should be documented. Deprecation tells you its not recommended for use anymore, and eventually to be replaced or removed. This does not automatically make it true in client code.</p>
</div>
<div class="paragraph">
<p>@2 Not a sensible counter argumentation IMO. It might apply if source code is available, well written and is easy code or boiler-plate stuff. Parsing through modified versions of optimized DCT code is not fun, and why one set of parameters was replaced with another. Thats what documentation is for. By extension, if documentation cannot keep up, there is no reason to do it in the first place, as the argument "everyone can just read the source code" still applies.</p>
</div>
<div class="paragraph">
<p>@3 Probably a question of severity. For example, while applicable for security relevant code, a lot of deprecation is along with enhancements, that are at all not relevant to the client at that point. Therefore, this influences the importance, and further, the inconvenience the user will go through to push those changes.</p>
</div>
<div class="paragraph">
<p>That being said, in our development cycles deprecation is usually considered a middle step we try to minimize in time, and often not worth doing at all. In development version, we just remove the method, forcing user to comply. Its rude but it works (anyone can patch it back in). For stable versions, adapting the documentation is as weak or strong as using an annotation.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><strong>Peter Verhas</strong> 2014-07-29 17:46:08</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>I read from your comment that, perhaps your interpretation of deprecation is a bit different. I feel that when you say a method is deprecated it is a kind ask of the users (library using developers) not to use it. In my reading it is a harsh command: you should not use it. It is only there for the old code so that some code which is not modified at the moment may still be "linked" with the new version of the library.</p>
</div>
<div class="paragraph">
<p>It is not a problem that we see the world different. It would otherwise be boring. Setting the topic to something that people think different just seeds the discussion that is the real value of a blog article. I appreciate your comments and thank you for adding value to the article for the commoon good of the community.</p>
</div>
</blockquote>
</div>
</div>


<!-- Disqus comments section goes here (if comments are enabled) -->

<hr/>
<h1>Comments</h1>
<p>Please leave your comments using Disqus, or just press one of the happy faces.
If for any reason you do not want to leave a comment here, <a href="https://github.com/javax0/javax0.github.io/issues">you can still create a Github ticket</a>.</p>
<div class="comments">
    <div id="disqus_thread"></div>

    <script type="text/javascript">

        /* * * STOP! * * */
        /* You shouldn't need to edit ANYTHING below to get this working! */
        /* Instead, edit the key `disqus.shortname` in _config.yml */

        var disqus_config = function (){
            this.page.url = 'https://javax0.github.io/2014/02/05/use-java-annotation-deprecated-the-right-way.html';
            this.page.identifier = '/2014/02/05/use-java-annotation-deprecated-the-right-way.html';
        };

        (function() {
            var d = document, s = d.createElement('script');
            s.type = 'text/javascript'; s.async = true;
            s.src = 'https://javax0.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();

    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>




  </div><a class="u-url" href="/2014/02/05/use-java-annotation-deprecated-the-right-way.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Java Deep, mostly Java</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Java Deep, mostly Java</li><li><a class="u-email" href="mailto:peter@verhas.com">peter@verhas.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/verhas"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">verhas</span></a></li><li><a href="https://www.twitter.com/verhas"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">verhas</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>javax0 is a technical Java oriented blog. Whenever I find something interesting, in the mood and feel the power to publish it, you will get it here. Publications are usually released on Wednesday 15:00am GMT. Earlier posts of the blog were published on Javax0 Wordpress Site at https://javax0.wordpress.com</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
