<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Technology behind this post | Java Deep, mostly Java</title>
<meta name="generator" content="Jekyll v4.3.1" />
<meta property="og:title" content="Technology behind this post" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="1. Introduction" />
<meta property="og:description" content="1. Introduction" />
<link rel="canonical" href="https://javax0.github.io/2022/12/07/blog-posting.html" />
<meta property="og:url" content="https://javax0.github.io/2022/12/07/blog-posting.html" />
<meta property="og:site_name" content="Java Deep, mostly Java" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-12-07T00:00:00+01:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Technology behind this post" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-12-07T00:00:00+01:00","datePublished":"2022-12-07T00:00:00+01:00","description":"1. Introduction","headline":"Technology behind this post","mainEntityOfPage":{"@type":"WebPage","@id":"https://javax0.github.io/2022/12/07/blog-posting.html"},"url":"https://javax0.github.io/2022/12/07/blog-posting.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://javax0.github.io/feed.xml" title="Java Deep, mostly Java" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Java Deep, mostly Java</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a><a class="page-link" href="/about/">About</a><a class="page-link" href="/">Java Deep</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Technology behind this post</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2022-12-07T00:00:00+01:00" itemprop="datePublished">Dec 7, 2022
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <div class="sect1">
<h2 id="1-introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>/Users/verhasp/github/javax0.github.io/_posts</code></p>
</div>
<div class="paragraph">
<p>This blog is the continuation of the blog post at the WordPress-hosted javax0 blog that was at <a href="https://javax0.wordpress.com">javax0.wordpress.com</a>.
The technology, the hosting, and all were okay by that time, but times changed.
This blog post describes why I changed the blog technology and what technology I use here to write these blog posts.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-problems-with-wordpress">2. Problems with WordPress</h2>
<div class="sectionbody">
<div class="paragraph">
<p>First, I have to state that I am not saying or implying that WordPress would not be an excellent platform.
It is a well-established and a kind of one of its kind, de-facto number-one blogging forum.
The problems are specific to my particular needs for this blog.
These needs may not be specific to my person, but a bit more general: technical blogging.</p>
</div>
<div class="paragraph">
<p>It is like Opel, Toyota, VW, or any other average, workhorse car type.
Opel is a good car; it runs, is reliable, and is reasonably priced.
However, if I am a farmer and need to plow my fields, I will probably choose a tractor instead.
In this analogy, the farmer is a <em>technical</em> blogger.
Emphasis is on <em>technical</em>.
For anybody else: WordPress is an excellent choice.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s have a look at the issues that I had.</p>
</div>
<div class="sect2">
<h3 id="2-1-markup">2.1. Markup</h3>
<div class="paragraph">
<p>When I write anything, I like to edit some markup.
I can use Word or LibreOffice.
I was using DEC Write in the early 1990-is if you are old enough to know what that is but not too old to forget things and still remember.
Even at that time, I preferred markups, which at that time were TeX and LaTeX.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>I even wrote a hyphenation preprocessor for Tex for the Hungarian language, and it became a standard part of some Linux distributions.
Since they installed Linux on  Mars Rovers, sometimes I entertain myself with the idea that some of my code got as far as planet Mars.
Please let me have this fantasy, and do not correct me if I am wrong.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We could use other markups, like APT, Markdown, Asciidoc, and many others over the years.
These days two of those are used mainly, Markdown and Asciidoc.
WordPress hosted site supported or still supports Markdown, but I started to prefer Asciidoc for these blogs.
The only problem was that I could not.</p>
</div>
</div>
<div class="sect2">
<h3 id="2-2-code-samples">2.2. Code Samples</h3>
<div class="paragraph">
<p>When I write some technical blogs, I include code samples.
I develop the code first, and then I write the article.
That is the principle.</p>
</div>
<div class="paragraph">
<p>However, the practice is that after I started to write the article, I realized that the code was not perfect.
So I changed the code and copied the relevant part to the article sample displays.
Unless I forget to update some of those after a few iterations.</p>
</div>
<div class="paragraph">
<p>It was also the case when I wrote my first book, and I have sworn that it will never happen again.</p>
</div>
</div>
<div class="sect2">
<h3 id="2-3-version-control">2.3. Version Control</h3>
<div class="paragraph">
<p>Editing on WordPress works, and you can look at the different versions.
But it is not comparable with the possibilities provided by a Git repository.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="3-the-new-blog-technology">3. The New Blog Technology</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="3-1-github-pages-and-jekyll">3.1. Github Pages and Jekyll</h3>
<div class="paragraph">
<p>The new technology stack for blogging is based on GitHub pages.
It is not unique, and it has support for Jekyll, which is a static blogging engine.
Setting up a Jekyll-based blog is pretty straightforward.
I already had the organization name <code>javax0</code> on GitHub.
It only seemed logical to use this as <code>javax0.github.io</code> for blogging.
Later I may use the <code>javax0.com</code> domain that I also keep.</p>
</div>
<div class="paragraph">
<p>Installing Jekyll on my MacBook was a bit tricky.
First, I had to install the newest Ruby.
An old version of Ruby comes preinstalled on every macOS.
This old version is not suitable for running Jekyll.
I used brew, but it failed, complaining that I was not on the sudoer list.
It took a while until I realized that, for some reason, two <code>sudo</code> programs were installed on my machine.
The brew installer used a different one than what I reached from the command line.
I had to add myself to the other sudoer&#8217;s list as well.
The last trick was to tweak the <code>PATH</code> so Jekyll would use the newest Ruby version.
After that, there was still some problem when I configured Jekyll to run locally and on GitHub.
It was executing some commands following some StackOverflow page suggestions.</p>
</div>
<div class="paragraph">
<p>Sometimes I had no idea what I was doing.
I can only hope that I did not install malware during the process.
You, AsciiDoc, Jekyll, and other tool developers have all my trust.</p>
</div>
<div class="paragraph">
<p>I integrated JRuby into Jamal, but I do not program in Ruby.</p>
</div>
</div>
<div class="sect2">
<h3 id="3-2-jekyll-asciidoc-plugin">3.2. Jekyll Asciidoc Plugin</h3>
<div class="paragraph">
<p>In addition to Jekyll, I also installed the Asciidoc plugin for Jekyll.
Since both Asciidoctor and Jekyll are written in Ruby, it was nothing more than issuing a few commands.</p>
</div>
</div>
<div class="sect2">
<h3 id="3-3-jamal">3.3. Jamal</h3>
<div class="paragraph">
<p>The extra part, which is not a standard Asciidoc-boosted Jekyll installation, is my use of Jamal.
The main reason to use Jamal is to include the code samples in the blog posts, but it does much more than that.</p>
</div>
<div class="paragraph">
<p>I wrote above that I struggled with maintaining the code samples when writing my books.
I created the pyama tool in Python for the second book I wrote.
It copies the code snippets into the text file that I edited.
Later I developed the snippet module for Jamal, which revolves around this concept.
Keep the source in the code files, have only a reference in the document, and copy it in the CI/CD process.
I hesitated to use Jamal and the snipped module myself for a long time.
It is easier to edit a file showing some code when the code is there a few lines above.
Pyama was copying the code into the edited file.
Jamal does not do that.
Jamal can also do that, but I do not recommend using that feature.
A source file is a source file.</p>
</div>
<div class="paragraph">
<p>When I created the Asciidoctor Jamal plugin that can plug Jamal functionality into Asciidoctor and delivers Jamal WYSIWYG editing in IntelliJ, the situation changed drastically.
There was no reason more to use something like pyama.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Pyama is still available in my GitHub, but there are much better tools for the purpose.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Using Jamal, I can include code snippets and delete or keep some lines by selecting regular expressions or line numbers.
I can number the lines, and I can still use all the Asciidoctor formatting features at the same time.</p>
</div>
</div>
<div class="sect2">
<h3 id="3-4-installing-jamal">3.4. Installing Jamal</h3>
<div class="paragraph">
<p>Installing Jamal to use in IntelliJ is very simple.
All it takes to download a ZIP file and extract the content into the projects <code>.asciidoctor/lib</code> directory.
You should open IntelliJ settings and associate the <code>.jam</code> extension with the Asciidoctor plugin (in addition to the other default extensions already there).
Restart IntelliJ, and you can start editing your first Jamal-enabled Asciidoc file.</p>
</div>
<div class="paragraph">
<p>As you edit the file on the left pane, you see the formatted text on the right pane.
It is how the plugin works, but you can also use Jamal macros now.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://javax0.github.io/assets/images/image-2022-12-09-16-47-43-394.png" alt="image 2022 12 09 16 47 43 394" width="500">
</div>
</div>
</div>
<div class="sect2">
<h3 id="3-5-blogging-macros">3.5. Blogging Macros</h3>
<div class="paragraph">
<p>There are not too many specific macros that differ from other documentation macros.
Most of the macros I use in Jamal are snippet macros and built-in core ones.
Some macros help scan the snippets following the directory naming conventions of the site.
There are some macros to reference one article from another easily.</p>
</div>
</div>
<div class="sect2">
<h3 id="3-6-deploying-the-site">3.6. Deploying the Site</h3>
<div class="paragraph">
<p>Deployment of the site is simply a git push.
Almost.
The site has to be built before.
There is a simple build script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">#!/bin/sh
./build
git add --all docs
git commit -m "deploy"
git push
open https://javax0.github.io</code></pre>
</div>
</div>
<div class="paragraph">
<p>This script builds the site, adds all the new and modified generated files, and then pushes it to the git server.
It also opens the web page, so I can immediately see the blog&#8217;s opening page after it is deployed.</p>
</div>
<div class="paragraph">
<p>I tried to let GitHub pages do the building of the Jekyll site.
After all, it supports Jekyll.
The problem is that GitHub does not support the Jekyll Asciidoc plugin.
It is a bit strange: Asciidoc is natively supported by GitHub, and any readme or other files can be Asciidoc.
Still, GitHub Sites cannot be, except if they are built and deployed elsewhere.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="4-building-the-site">4. Building the site</h2>
<div class="sectionbody">
<div class="paragraph">
<div class="title">update at 2023-01-25</div>
<p>Building the site was first was a simple <code>Makefile</code> starting Jamal via <code>jbang</code> to convert all the <code>.adoc.jam</code> files to <code>.adoc</code> from the directory <code>_posts</code>.
This, however, resulted almost 400 files in the directory.
During the course of the last ten years I wrote 180 articles.
All their <code>.adoc.jam</code> and the generated <code>.adoc</code> files got into one flat directory.</p>
</div>
<div class="paragraph">
<p>To mitigate this situation I decided to group the articles into subdirectories by years.
It means eleven subdirectories now and 15 to 20 more in my lifetime.
It is manageable.
The problem was I did not know how to write a general <code>make</code> rule that says <code>.adoc.jam</code> files in the subdirectories should be compiled to <code>.adoc</code> files in the <code>_posts</code> directory.</p>
</div>
<div class="paragraph">
<p>I used Jamal to the rescue.
What else?
I created a <code>Makefile.jam</code> with the following content:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">{@sep [% %] }[%@import tab.jim%]\
all:  [%!@for [evalist] $file in `//` [%@listDir (pattern="\\.adoc\\.jam$") _posts%]`//` =[%@comment%]\
 _posts/[%@file (format=$naked1)$file%]%]\

[%!!#for $dir in ([%@listDir (maxDepth=1 pattern="/\\d{4}$")_posts%])=[%@comment%]\
  [%@ident
    [%@for [evalist] $file in `//` [%@listDir (maxDepth=1 pattern="\\.adoc\\.jam$") $dir%]`//` =[%@comment%]\
    [%#define YYYY=[%#replace (regex)|$dir|.*/_posts/||%]%]\
    [%#define SOURCE=_posts/[%YYYY%]/[%#file (format=$simpleName)$file%]%]\
    [%#define TARGET=_posts/[%@file (format=$naked1)$file%]%]
[%TARGET%] : [%SOURCE%]
[%HT%]jbang jamal@verhas -open='{%' -close='%}' [%SOURCE%] [%TARGET%]
    %]%]%]</code></pre>
</div>
</div>
<div class="paragraph">
<p>I do not expect you to understand this structure.
It is fairly complex,but it shows the power of Jamal in some way.
You should not feel intimidated.
If you decide to use Jamal only for 10% of what it can do, it is fine.
It is a tool to provide value and not something you need to master.</p>
</div>
<div class="paragraph">
<p>This Jamal code lists all the files and generates <code>Makefile</code> rules for each <code>.adoc.jam</code> article.
I struggled a bit with spaces and tabs.
IntelliJ does not preserve the tabs, except when it is a <code>Makefile</code>.
However, <code>Makefile.jam</code> is NOT <code>Makefile</code>.
As a workaround I created a <code>tab.jim</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">{@define HT=	} &lt;- this is a tab character
A simple tab character.

This file is not to be edited other than vi.
Other editors may replace the TAB character with spaces.
Files can import this file and use {HT} in Makefiles.
To exit vi press the escape key and then capital Z twice.
Without saving: escsape and then :q!</code></pre>
</div>
</div>
<div class="paragraph">
<p>The comment in the file says it all, I wil not repeat here.</p>
</div>
<div class="paragraph">
<p>I may later move the <code>YYYY</code> yearly subdirectories from <code>_posts</code> to make the <code>_posts</code> directory something that I never need to open in the editor.
Look at the GitHub repo to see if I did that.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="5-what-will-be-missing">5. What will be Missing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>WordPress very neatly showed the statistics of the site.
I do not know if I can get such statistics here.
Probably not.</p>
</div>
<div class="paragraph">
<p>On the other hand, most of the readers for my articles came from the republishing sites DZone and Java Code Geeks.
I will keep them.
(Note to myself: I have to inform them about the blog&#8217;s new location officially.)
They automatically fetch the blog posts.
So I do not need to do anything.
They select from the published articles.
They only repost the good ones.</p>
</div>
<div class="paragraph">
<p>If you know any other aggregator I should contact, give me some advice. I am open.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="6-summary">6. Summary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>I hope blogging using this toolset will be much more fun than the old technology.
At least, I am less likely to end up in some articles with <code>&amp;lt;</code> and <code>&amp;gt;</code> infested source codes.
(I had to apply a unique trick to get them here.)</p>
</div>
<div class="paragraph">
<p>This type of blogging using Asciidoc, Jekyll, and Jamal is more a Doc as a Code that I advocate heavily.
We will see how it will work.</p>
</div>
</div>
</div>


<!-- Disqus comments section goes here (if comments are enabled) -->

<hr/>
<h1>Comments</h1>
<p>Please leave your comments using Disqus, or just press one of the happy faces.
If for any reason you do not want to leave a comment here, <a href="https://github.com/javax0/javax0.github.io/issues">you can still create a Github ticket</a>.</p>
<div class="comments">
    <div id="disqus_thread"></div>

    <script type="text/javascript">

        /* * * STOP! * * */
        /* You shouldn't need to edit ANYTHING below to get this working! */
        /* Instead, edit the key `disqus.shortname` in _config.yml */

        var disqus_config = function (){
            this.page.url = 'https://javax0.github.io/2022/12/07/blog-posting.html';
            this.page.identifier = '/2022/12/07/blog-posting.html';
        };

        (function() {
            var d = document, s = d.createElement('script');
            s.type = 'text/javascript'; s.async = true;
            s.src = 'https://javax0.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();

    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>




  </div><a class="u-url" href="/2022/12/07/blog-posting.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Java Deep, mostly Java</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Java Deep, mostly Java</li><li><a class="u-email" href="mailto:peter@verhas.com">peter@verhas.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/verhas"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">verhas</span></a></li><li><a href="https://www.twitter.com/verhas"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">verhas</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>javax0 is a technical Java oriented blog. Whenever I find something interesting, in the mood and feel the power to publish it, you will get it here. Publications are usually released on Wednesday 15:00am GMT. Earlier posts of the blog were published on Javax0 Wordpress Site at https://javax0.wordpress.com</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
